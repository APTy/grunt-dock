#
# Dockerfile for node
#

FROM    debian:latest

# Install node
RUN     export DEBIAN_FRONTEND=noninteractive && \
        apt-get update; apt-get upgrade && \
        apt-get install -y wget && \
        wget -q http://nodejs.org/dist/v0.10.33/node-v0.10.33-linux-x64.tar.gz && \
        tar --strip-components 1 -xzf node-v* -C /usr/local && \
        apt-get clean; apt-get autoremove && \
        apt-get remove -y wget && \
        rm -rf node-v0.10.33-linux-x64.tar.gz /var/lib/apt/lists/* && \
        node --version && \
        mkdir /bundle; cd /bundle

RUN     echo "\
        var http = require('http'); \
        var server = http.createServer(function (req, res) { \
          res.writeHead(200, {'Content-Type': 'text/plain'}); \
          res.end('Hello World from node');res.end(); \
        }); \
        server.listen(8080); \
        console.log('Server running at http://127.0.0.1:8000/'); \
        " > /bundle/app.js

EXPOSE  8080

CMD     ["node", "/bundle/app.js"]
